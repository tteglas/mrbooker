/*
@license
dhtmlxScheduler v.5.0.0 Stardard
This software is covered by GPL license. You also can obtain Commercial or Enterprise license to use it in non-GPL project - please contact sales@dhtmlx.com. Usage without proper license is prohibited.
(c) Dinamenta, UAB.
*/
window.dhtmlXTooltip=scheduler.dhtmlXTooltip=window.dhtmlxTooltip={};dhtmlXTooltip.config={className:"dhtmlXTooltip tooltip",timeout_to_display:50,timeout_to_hide:50,delta_x:15,delta_y:-20};dhtmlXTooltip.tooltip=document.createElement("div");dhtmlXTooltip.tooltip.className=dhtmlXTooltip.config.className;scheduler._waiAria.tooltipAttr(dhtmlXTooltip.tooltip);dhtmlXTooltip.show=function(n,t){var u,o,f,e,s,h;if(!this._mobile||scheduler.config.touch_tooltip){var r=dhtmlXTooltip,c=this.tooltip,i=c.style;r.tooltip.className=r.config.className;u=this.position(n);o=n.target||n.srcElement;this.isTooltip(o)||(f=u.x+(r.config.delta_x||0),e=u.y-(r.config.delta_y||0),i.visibility="hidden",i.removeAttribute?(i.removeAttribute("right"),i.removeAttribute("bottom")):(i.removeProperty("right"),i.removeProperty("bottom")),i.left="0",i.top="0",this.tooltip.innerHTML=t,document.body.appendChild(this.tooltip),s=this.tooltip.offsetWidth,h=this.tooltip.offsetHeight,document.documentElement.clientWidth-f-s<0?(i.removeAttribute?i.removeAttribute("left"):i.removeProperty("left"),i.right=document.documentElement.clientWidth-f+2*(r.config.delta_x||0)+"px"):i.left=0>f?u.x+Math.abs(r.config.delta_x||0)+"px":f+"px",document.documentElement.clientHeight-e-h<0?(i.removeAttribute?i.removeAttribute("top"):i.removeProperty("top"),i.bottom=document.documentElement.clientHeight-e-2*(r.config.delta_y||0)+"px"):i.top=0>e?u.y+Math.abs(r.config.delta_y||0)+"px":e+"px",scheduler._waiAria.tooltipVisibleAttr(this.tooltip),i.visibility="visible",this.tooltip.onmouseleave=function(n){n=n||window.event;for(var i=scheduler.dhtmlXTooltip,t=n.relatedTarget;t!=scheduler._obj&&t;)t=t.parentNode;t!=scheduler._obj&&i.delay(i.hide,i,[],i.config.timeout_to_hide)},scheduler.callEvent("onTooltipDisplayed",[this.tooltip,this.tooltip.event_id]))}};dhtmlXTooltip._clearTimeout=function(){this.tooltip._timeout_id&&window.clearTimeout(this.tooltip._timeout_id)};dhtmlXTooltip.hide=function(){if(this.tooltip.parentNode){scheduler._waiAria.tooltipHiddenAttr(this.tooltip);var n=this.tooltip.event_id;this.tooltip.event_id=null;this.tooltip.onmouseleave=null;this.tooltip.parentNode.removeChild(this.tooltip);scheduler.callEvent("onAfterTooltip",[n])}this._clearTimeout()};dhtmlXTooltip.delay=function(n,t,i,r){this._clearTimeout();this.tooltip._timeout_id=setTimeout(function(){var r=n.apply(t,i);return n=t=i=null,r},r||this.config.timeout_to_display)};dhtmlXTooltip.isTooltip=function(n){for(var t=!1;n&&!t;)t=n.className==this.tooltip.className,n=n.parentNode;return t};dhtmlXTooltip.position=function(n){return n=n||window.event,{x:n.clientX,y:n.clientY}};scheduler.attachEvent("onMouseMove",function(n,t){var f=window.event||t,s=f.target||f.srcElement,i=dhtmlXTooltip,c=i.isTooltip(s),h=i.isTooltipTarget&&i.isTooltipTarget(s),u,r,e,o;if(n&&scheduler.getState().editor_id!=n||c||h){if(n||i.tooltip.event_id){if(r=scheduler.getEvent(n)||scheduler.getEvent(i.tooltip.event_id),!r)return;if(i.tooltip.event_id=r.id,u=scheduler.templates.tooltip_text(r.start_date,r.end_date,r),!u)return i.hide()}if(h&&(u=""),_isIE){e={pageX:void 0,pageY:void 0,clientX:void 0,clientY:void 0,target:void 0,srcElement:void 0};for(o in e)e[o]=f[o]}if(!scheduler.callEvent("onBeforeTooltip",[n])||!u)return;i.delay(i.show,i,[e||f,u])}else i.delay(i.hide,i,[],i.config.timeout_to_hide)});scheduler.attachEvent("onBeforeDrag",function(){return dhtmlXTooltip.hide(),!0});scheduler.attachEvent("onEventDeleted",function(){return dhtmlXTooltip.hide(),!0});